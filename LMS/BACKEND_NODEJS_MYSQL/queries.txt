create table books (
    book_id int primary key auto_increment,
    name text not null default 'BOOK NAME',
    isbn varchar(15) not null default '0',
    publisher text not null default 'PUBLISHER NAME',
    edition varchar(20) not null default '1',
    price int not null default 0,
    pages int not null default 0
);

create table students (
    student_id int primary key auto_increment,
    name varchar (200) not null default 'NAME',
	guardian_name varchar (200) not null default 'NAME',
    course_id int not null,
    branch_id int not null,
    year int not null default 1,
    semester int not null default 1
);

create table courses (
    course_id int primary key auto_increment,
    course_name text not null default 'COURSE_NAME'
);

create table branches (
    branch_id int primary key auto_increment,
    branch_name text not null default 'BRANCH NAME',
    course_id int not null,
    FOREIGN KEY (course_id) REFERENCES courses(course_id) ON DELETE CASCADE
);

alter table students add FOREIGN KEY (branch_id) REFERENCES branches(branch_id) ON DELETE CASCADE;

alter table students add FOREIGN KEY (course_id) REFERENCES courses(course_id) ON DELETE CASCADE;


create table issued_books (
    student_id int not null,
    book_id int not null,
    issued_at timestamp not null default NOW(),
    returned_at timestamp not null default NOW()
);

alter table issued_books add FOREIGN KEY(student_id) REFERENCES students(student_id);

alter table issued_books add FOREIGN KEY(book_id) REFERENCES books(book_id);